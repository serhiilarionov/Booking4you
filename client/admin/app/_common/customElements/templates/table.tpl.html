<div id="c-table">
  <div jarvis-widget id="{{settings.name}}" data-widget-color="darken" data-widget-editbutton="false">
    <header>
      <span class="widget-icon"> <i class="fa fa-table"></i> </span>
      <h2>{{settings.title}}</h2>
    </header>
    <div>
      <div class="widget-body no-padding">
        <p class="control-buttons">
          <!-- Table control buttons -->
          <button type="button" class="btn btn-info" data-toggle="modal" data-target="#{{settings.name}}NewRowModal"
                  ng-if="settings.buttons.add">
            <i class="fa fa-plus"></i>&nbsp;Добавить
          </button>
          <button ng-click="reloadTableData()" type="button" class="btn btn-info"
                  ng-if="settings.buttons.refresh">
            <i class="fa fa-refresh"></i>&nbsp;Обновить данные
          </button>
          <!--End Table control buttons -->
          <!-- Table -->
        <table class="table table-striped table-bordered table-hover" width="100%"
               datatable
               dt-options="tableOptions"
               dt-columns="tableColumns"
               dt-instance="tableInstance">
        </table>
        <!--End table -->
      </div>
    </div>
  </div>

  <!-- Start adding table row modal -->
  <div class="modal fade" id="{{settings.name}}NewRowModal" tabindex="-1" role="dialog"
       aria-labelledby="{{settings.name}}NewModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title" id="{{settings.name}}NewModalLabel">Добавление</h4>
        </div>
        <div class="modal-body">
          <form id="{{settings.name}}-adding-new-row-form" class="smart-form" ng-submit="addNewRow()">
            <fieldset>
              <div ng-repeat="col in settings.columns track by $index" ng-if="!col.readOnly">
                <!-- Text -->
                <section class="col form-input" ng-if="!col.editorType || col.editorType=='text'">
                  <label class="input">{{col.title}}
                    <input type="text" id="{{settings.name}}{{col.dataField}}Text" placeholder="{{col.title}}"
                           ng-model="newData[col.dataField]"
                           ng-required="col.required"
                           ng-pattern="col.pattern">
                  </label>
                </section>
                <!-- End Txt-->

                <!-- Check box -->
                <section class="col form-input active-checkbox" ng-if="col.editorType=='checkbox'">
                  <label class="checkbox">
                    <input type="checkbox" id="{{settings.name}}{{col.dataField}}Checkbox"
                           ng-model="newData[col.dataField]"
                           ng-required="col.required"
                           ng-pattern="col.pattern">
                    <i></i>{{col.title}}</label>
                </section>
                <!-- End Check box -->

                <!-- Select box-->
                <section class="col form-input" ng-if="col.editorType=='selectBox'">
                  <label class="input">{{col.title}}
                    <select class="form-control input-sm" id="{{settings.name}}{{col.dataField}}SelectBox"
                            ng-model="newData[col.dataField]"
                            ng-required="col.required">
                      <option
                          ng-repeat="row in col.editorOptions.dataSource || table[col.editorOptions.dataSourceString] track by row.id"
                          value="{{row[col.editorOptions.value]}}"
                          ng-selected="newData[col.dataField]">
                        #{{row[col.editorOptions.value]}} ({{row[col.editorOptions.caption]}})
                      </option>
                    </select>
                  </label>
                </section>
                <!-- End Select box-->

                <!-- Number -->
                <section class="col form-input" ng-if="col.editorType=='number'">
                  <label class="input">{{col.title}}
                    <input type="number" id="{{settings.name}}{{col.dataField}}Number"
                           placeholder="{{col.placeholder}}"
                           ng-model="newData[col.dataField]"
                           ng-required="col.required"
                           ng-pattern="col.pattern">
                  </label>
                </section>
                <!-- End number-->

              </div>
            </fieldset>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Отменить</button>
          <button type="submit" form="{{settings.name}}-adding-new-row-form" class="btn btn-primary">Добавить</button>
        </div>
      </div>
    </div>
  </div>
  <!-- End adding table row modal -->

  <!-- Start editing table row modal -->
  <div class="modal fade" id="{{settings.name}}EditRowModal" tabindex="-1" role="dialog"
       aria-labelledby="{{settings.name}}EditModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title" id="{{settings.name}}EditModalLabel">Редактирование</h4>
        </div>
        <div class="modal-body">
          <form id="{{settings.name}}-editing-row-form" class="smart-form"
                ng-submit="editRow(table.selectedRowKeyId, table.editRowData)">
            <fieldset>
              <div ng-repeat="col in settings.columns track by $index" ng-if="!col.readOnly">
                <!-- Text -->
                <section class="col form-input" ng-if="!col.editorType || col.editorType=='text'">
                  <label class="input">{{col.title}}
                    <input type="text" id="{{settings.name}}{{col.dataField}}EditText" placeholder="{{col.title}}"
                           ng-model="table.editRowData[col.dataField]"
                           ng-required="col.required"
                           ng-pattern="col.pattern">
                  </label>
                </section>
                <!-- End Txt-->

                <!-- Check box -->
                <section class="col form-input active-checkbox" ng-if="col.editorType=='checkbox'">
                  <label class="checkbox">
                    <input type="checkbox" id="{{settings.name}}{{col.dataField}}EditCheckbox"
                           ng-model="table.editRowData[col.dataField]"
                           ng-required="col.required"
                           ng-pattern="col.pattern">
                    <i></i>{{col.title}}</label>
                </section>
                <!-- End Check box -->

                <!-- Select box-->
                <section class="col form-input" ng-if="col.editorType=='selectBox'">
                  <label class="input">{{col.title}}
                    <select class="form-control input-sm" id="{{settings.name}}{{col.dataField}}EditSelectBox"
                            ng-model="table.editRowData[col.dataField]"
                            ng-required="col.required">
                      <option
                          ng-repeat="row in col.editorOptions.dataSource || table[col.editorOptions.dataSourceString] track by row.id"
                          value="{{row.id}}"
                          ng-selected="table.editRowData[col.dataField] == row.id">
                        #{{row[col.editorOptions.value]}} ({{row[col.editorOptions.caption]}})
                      </option>
                    </select>
                  </label>
                </section>
                <!-- End Select box-->

                <!-- Number -->
                <section class="col form-input" ng-if="col.editorType=='number'">
                  <label class="input">{{col.title}}
                    <input type="number" id="{{settings.name}}{{col.dataField}}EditNumber"
                           placeholder="{{col.placeholder}}"
                           ng-model="table.editRowData[col.dataField]"
                           ng-required="col.required"
                           ng-pattern="col.pattern">
                  </label>
                </section>
                <!-- End number-->

              </div>
            </fieldset>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Отменить</button>
          <button type="submit" form="{{settings.name}}-editing-row-form" class="btn btn-primary">Сохранить</button>
        </div>
      </div>
    </div>
  </div>
  <!-- End editing table row modal -->

  <!-- Remove table row modal-->
  <div class="modal fade" id="{{settings.name}}RemoveRowModal" tabindex="-1" role="dialog"
       aria-labelledby="{{settings.name}}removeRowModal"
       aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title" id="{{settings.name}}RemoveModalLabel">Удаление</h4>
        </div>
        <div class="modal-body">
          Вы точно хотите удалить:
          {{dataList[currentKeyId].name}}
          (№{{currentKeyId}})
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Отменить</button>
          <button type="button" class="btn btn-danger"
                  ng-click="removeRow(currentKeyId)">
            <i class='fa fa-trash-o'></i>&nbsp; Удалить
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- End remove  table row modal-->

</div>